<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Новини</title>
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f3f3f3;
            color: black;
        }
        .news-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .news-card {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            padding: 15px;
            transition: transform 0.3s ease;
        }
        .news-card:hover {
            transform: scale(1.02);
        }
        .news-title {
            font-family: 'Open Sans', sans-serif;
            font-size: 16px;
            font-weight: bold;
            color: black;
            text-decoration: none;
            display: block;
            margin-bottom: 10px;
        }
        .news-title:hover {
            color: #2778a3;
        }
        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: #555;
        }
        .badge {
            background-color: #f0f0f0;
            border: 1px solid #aaa;
            color: black;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        /* Адаптація для мобільних */
        @media (max-width: 768px) {
            .news-grid {
                grid-template-columns: 1fr !important;
            }
            body {
                padding: 10px !important;
            }
        }
    </style>
</head>
<body>
    <div id="news-container" class="news-grid">
        Завантаження новин...
    </div>

    <script>
        // Функція для обробки JSONP відповіді
        function handleNewsData(data) {
            const newsContainer = document.getElementById('news-container');
            if (data && data.length > 0) {
                newsContainer.innerHTML = data.map(item => `
                    <div class="news-card">
                        <a href="${item.link}" class="news-title" target="_blank">${item.title}</a>
                        <div class="news-meta">
                            <span class="badge">${item.source}</span>
                            <span>${new Date(item.date).toLocaleDateString('uk-UA')}</span>
                        </div>
                    </div>
                `).join('');
            } else {
                newsContainer.innerHTML = '<p>Не вдалося завантажити новини.</p>';
            }
        }

        // Функція для обробки помилок
        function handleNewsError() {
            document.getElementById('news-container').innerHTML = '<p>Помилка завантаження новин.</p>';
        }

        // Створюємо script тег для JSONP запиту
        const script = document.createElement('script');
        script.src = 'https://script.google.com/macros/s/AKfycbxl-fM9T22SlL7P_01i3-pnz0Mmn6Kmb1X5fMsKboY-y_hNWK_jlPUro5vWcsdDy3OBIw/exec?callback=handleNewsData';
        script.onerror = handleNewsError;
        
        // Додаємо script до документу для виконання запиту
        document.head.appendChild(script);
    </script>
</body>
</html>
<script>
// Функція для автоматичної зміни висоти iframe
function resizeIframe() {
    const iframe = document.querySelector('iframe');
    if (iframe) {
        // Отримуємо висоту контенту
        const height = document.documentElement.scrollHeight;
        // Встановлюємо висоту iframe
        iframe.style.height = height + 'px';
        
        console.log('Висота iframe оновлена:', height + 'px');
    }
}

// Викликаємо при завантаженні та при зміні розміру
window.addEventListener('load', resizeIframe);
window.addEventListener('resize', resizeIframe);

// Також викликаємо через невелику затримку після завантаження контенту
setTimeout(resizeIframe, 1000);
setTimeout(resizeIframe, 3000);

// Сповіщаємо батьківську сторінку (якщо iframe вставлений в інший сайт)
function sendHeightToParent() {
    const height = document.documentElement.scrollHeight;
    window.parent.postMessage({
        type: 'resize-iframe',
        height: height
    }, '*');
}

// Відправляємо висоту батьківському вікну
window.addEventListener('load', sendHeightToParent);
window.addEventListener('resize', sendHeightToParent);
</script>
